<!DOCTYPE html>
<html lang="en" 
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{ecommerce/layout}">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
</head>
<body>
    <div layout:fragment="content">
    	<div class="row">
    		<div class="col-lg-12">
    			<div class="card">
   					<div class="card-header">
   						<h2>Pedido número: <span th:text="${#numbers.formatInteger(pedido.id,8)}"></span>
   							(<span th:text="${pedido.statusPedido.value()}"></span>)
   						</h2>
   					</div>
   					<div class="card-body">
   						<div class="row">
   							<div class="col-lg-12" th:if="${pedido.msgPedido != null}">
   								<div class="alert alert-warning">
   									<span th:utext="${pedido.msgPedido}"></span>
   								</div>
   							</div>
   							<div class="col-lg-3">
   								<div class="card">
	    							<div class="card-body">
	    								<h5>Informações da entrega</h5>
	    								<div class="card-text">
	    									<div style="text-transform:capitalize;">
		    									<p>
			    									<b>Endereco : </b> 
			    									<span th:text="${pedido.enderecoEntrega.tipoLogradouro}"></span>
			    									<span th:text="${pedido.enderecoEntrega.descricao}"></span>
		    									<p>
		    									<p><b>Numero: </b><span th:text="${pedido.enderecoEntrega.numero}"></span></p>
	    										<p><b>CEP: </b><span th:text="${pedido.enderecoEntrega.cep}"></span></p>
	    									</div>
	    									<div style="text-transform: capitalize;">
	    										
	    									</div>
	    								</div>
	    							</div>
   								</div>
   							</div>
   							<div class="col-lg-3" th:each="cartao : ${pedido.cartao}">
   								<div class="card">
   									<div class="card-header">
   										<h5>Cartão - <span th:text="${cartao.titular}"></span> </h5>
   									</div>
   									<div class="card-body">
   										<div class="card-text">
   											<p>
   												<b>Numero: </b> <span th:text="${cartao.numero}"></span>
   											</p>
   											<p>
   												<b>Valor: </b> <span th:text="${cartao.valorUtilizado}"></span>
   											</p>
   											<p>
   												<b>Validade: </b><span th:text="${#temporals.format(cartao.validade,'dd/MM/yyyy')}"></span>
   											</p>
   										</div>
   									</div>
   								</div>
   							</div>
   						</div>
   					</div>
   					<div class="card-body" th:if="${pedido.cupom != null && pedido.cupom.size() > 0}">
   						<div class="col-lg-12">
   							<h3>Cupons utilizado na compra</h3>
   							<ul class="list-group">
   								<li class="list-group-item" th:each="cupom : ${pedido.cupom}">
   									<b th:text="${cupom.codigo}"></b> |
   									<span th:text="${'R$' + cupom.valor}"></span> |
   									<span th:text="${(cupom.ativo) ? 'Ativo' : 'Inativo'}"></span>
   								</li>
   							</ul>
   						</div>
   					</div>
   					<div class="card-body">
   						<div class="row">
   							<div class="col-lg-12">
   								<table class="table table-dark">
   									<caption>Produtos</caption>
   									<thead>
   										<tr>
   											<th>#</th>
   											<th>Descrição</th>
   											<th>Quantidade</th>
   										</tr>
   									</thead>
   									<tbody>
   										<tr th:each="item : ${pedido.itens}">
   											<td th:text="${#numbers.formatInteger(item.produto.id,10)}"></td>
   											<td th:text="${item.produto.descricao}"></td>
   											<td th:text="${item.quantidade}"></td>
   										</tr>
   									</tbody>
   								</table>
   							</div>
   						</div>
   						<div class="row" th:if="${pedido.statusPedido == T(com.les.ecommerce.model.venda.StatusPedido).TROCADO}">
   							<div class="col-lg-12">
   								<table class="table table-dark">
   									<caption>Cupons Troca</caption>
   									<thead>
   										<tr>
   											<th>Id</th>
	   										<th>Codigo</th>
	   										<th>Valor</th>
	   										<th>Ativo</th>
   										</tr>
   									</thead>
   									<tbody>
   										<tr th:each="cupom : ${pedido.cliente.cupons}">
   											<td th:text="${cupom.id}"></td>
   											<td th:text="${cupom.codigo}"></td>
   											<td th:text="${cupom.valor}"></td>
   											<td>
   												<input type="checkbox" th:checked="${cupom.ativo}" readonly="readonly"/>
   											</td>
   										</tr>
   									</tbody>
   								</table>
   							</div>
   						</div>
   					</div>
   					<div class="card-footer">
   						<form th:action="@{/pedido/cliente/alterarStatus}" th:object="${pedido}" method="post" id="frmPedido">
   							<input type="hidden" th:field="*{id}"/>
   							<input type="hidden" th:field="*{statusPedido}" />
   							<button class="btn btn-primary" type="button" id="btnTrocar"
   							th:if="${pedido.statusPedido == T(com.les.ecommerce.model.venda.StatusPedido).ENTREGUE}">Trocar Pedido</button>
   						</form>
   					</div>
    			</div>
    		</div>
    	</div>
    </div>
    <th:block layout:fragment="scriptblock">
		<script data-main="/js/pedidos/visualizarPedido"
			src="/webjars/requirejs/require.min.js"></script>
	</th:block>
</body>
</html>